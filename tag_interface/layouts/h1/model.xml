<?xml version='1.0' encoding='utf-8-sig'?>
<TagGroup group="mode" name="model" version="4">
  <Layout regolithID="block:model" internalName="model_block" name="model">
    <FieldSet version="0" sizeofValue="232" sizeofSource="sizeof(struct model_group)" isLatest="true">
      <Explanation name="Model" description="These kinds of tags are compatible with the Xbox version of the game (but not Gearbox). When the cache file is compiled for Xbox, then the uncompressed vertices are discarded when copied into the map. Otherwise, the compressed vertices are discarded.&#10;&#10;Flags:&#10;- blend shared normals: On map compilation, vertices with the same positions have their normals linearly averaged.&#10;&#10;Note that compressed vertices can only address up to 42 nodes." />
      <LongFlags CStyleName="flags" pascalStyleName="Flags" name="flags">
        <Options regolithID="enum:flags" CStyleName="flags" pascalStyleName="Flags">
          <Bit name="blend shared normals" CStyleName="blend_shared_normals_bit" pascalStyleName="BlendSharedNormalsBit" />
        </Options>
      </LongFlags>
      <LongInteger CStyleName="node_list_checksum" pascalStyleName="NodeListChecksum" name="node list checksum" />
      <Struct CStyleName="detail_cutoff" pascalStyleName="DetailCutoff" name="detail cutoff">
        <Layout regolithID="structure:model_detail_cutoff" internalName="model_detail_cutoff_struct" backingBlockInternalName="model_detail_cutoff_struct_block" name="model detail cutoff">
          <FieldSet version="0" sizeofValue="20" isLatest="true">
            <Real CStyleName="super_high" pascalStyleName="SuperHigh" name="super high" />
            <Real CStyleName="high" pascalStyleName="High" name="high" />
            <Real CStyleName="medium" pascalStyleName="Medium" name="medium" />
            <Real CStyleName="low" pascalStyleName="Low" name="low" />
            <Real CStyleName="super_low" pascalStyleName="SuperLow" name="super low" />
          </FieldSet>
        </Layout>
      </Struct>
      <Struct CStyleName="detail_node_count" pascalStyleName="DetailNodeCount" name="detail node count" cacheOnly="true">
        <Layout regolithID="structure:model_detail_node_count" internalName="model_detail_node_count_struct" backingBlockInternalName="model_detail_node_count_struct_block" name="model detail node count">
          <FieldSet version="0" sizeofValue="12" isLatest="true">
            <ShortInteger CStyleName="super_low" pascalStyleName="SuperLow" name="super low" unsigned="true" />
            <ShortInteger CStyleName="low" pascalStyleName="Low" name="low" unsigned="true" />
            <ShortInteger CStyleName="medium" pascalStyleName="Medium" name="medium" unsigned="true" />
            <ShortInteger CStyleName="high" pascalStyleName="High" name="high" unsigned="true" />
            <ShortInteger CStyleName="super_high" pascalStyleName="SuperHigh" name="super high" unsigned="true" />
            <Pad name="pad" length="2" />
          </FieldSet>
        </Layout>
      </Struct>
      <Pad name="pad" length="8" />
      <Real CStyleName="base_map_u_scale" pascalStyleName="BaseMapUScale" name="base map u scale" />
      <Real CStyleName="base_map_v_scale" pascalStyleName="BaseMapVScale" name="base map v scale" />
      <Pad name="pad" length="116" />
      <Block CStyleName="runtime_markers" pascalStyleName="RuntimeMarkers" name="runtime markers" maxElementCount="0" description="NOTE: This field MUST be empty for loose tags! This is populated by the markers stored in regions on cache build.&#10;&#10;This field was originally cache only and the maximum was 256, however we define it differently than what it actually is so we can detect erroneous tags generated by HEK+ and Refinery.&#10;&#10;This is an unfortunate limitation, and the *correct* approach is to treat it as cache only, but doing so would result in silent data loss for many years of tags due to bad tag extraction.">
        <Layout regolithID="block:runtime markers" internalName="runtime markers_block" name="runtime markers_block">
          <FieldSet version="0" sizeofValue="64" isLatest="true">
            <String CStyleName="name" pascalStyleName="Name" name="name" />
            <ShortInteger CStyleName="magic_identifier" pascalStyleName="MagicIdentifier" name="magic identifier" />
            <Pad name="pad" length="2" />
            <Pad name="pad" length="16" />
            <Block CStyleName="instances" pascalStyleName="Instances" name="instances" maxElementCount="32767">
              <Layout regolithID="block:instances" internalName="instances_block" name="instances_block">
                <FieldSet version="0" sizeofValue="32" isLatest="true">
                  <CharInteger CStyleName="region_index" pascalStyleName="RegionIndex" name="region index" unsigned="true" />
                  <CharInteger CStyleName="permutation_index" pascalStyleName="PermutationIndex" name="permutation index" unsigned="true" />
                  <CharInteger CStyleName="node_index" pascalStyleName="NodeIndex" name="node index" unsigned="true" />
                  <Pad name="pad" length="1" />
                  <RealVector3D CStyleName="translation" pascalStyleName="Translation" name="translation" />
                  <RealQuaternion CStyleName="rotation" pascalStyleName="Rotation" name="rotation" />
                </FieldSet>
              </Layout>
            </Block>
          </FieldSet>
        </Layout>
      </Block>
      <Block CStyleName="nodes" pascalStyleName="Nodes" name="nodes" maxElementCount="255">
        <Layout regolithID="block:nodes" internalName="nodes_block" name="nodes_block">
          <FieldSet version="0" sizeofValue="156" isLatest="true">
            <String CStyleName="name" pascalStyleName="Name" name="name" />
            <ShortInteger CStyleName="next_sibling_node_index" pascalStyleName="NextSiblingNodeIndex" name="next sibling node index" />
            <ShortInteger CStyleName="first_child_node_index" pascalStyleName="FirstChildNodeIndex" name="first child node index" />
            <ShortInteger CStyleName="parent_node_index" pascalStyleName="ParentNodeIndex" name="parent node index" />
            <Pad name="pad" length="2" />
            <RealVector3D CStyleName="default_translation" pascalStyleName="DefaultTranslation" name="default translation" />
            <RealQuaternion CStyleName="default_rotation" pascalStyleName="DefaultRotation" name="default rotation" />
            <Real CStyleName="node_distance_from_parent" pascalStyleName="NodeDistanceFromParent" name="node distance from parent" />
            <Pad name="pad" length="32" />
            <Real CStyleName="scale" pascalStyleName="Scale" name="scale" cacheOnly="true" />
            <Matrix3x3 CStyleName="rotation" pascalStyleName="Rotation" name="rotation" cacheOnly="true" />
            <RealVector3D CStyleName="translation" pascalStyleName="Translation" name="translation" cacheOnly="true" />
          </FieldSet>
        </Layout>
      </Block>
      <Block CStyleName="regions" pascalStyleName="Regions" name="regions" maxElementCount="255">
        <Layout regolithID="block:regions" internalName="regions_block" name="regions_block">
          <FieldSet version="0" sizeofValue="76" isLatest="true">
            <String CStyleName="name" pascalStyleName="Name" name="name" />
            <Pad name="pad" length="32" />
            <Block CStyleName="permutations" pascalStyleName="Permutations" name="permutations" maxElementCount="255">
              <Layout regolithID="block:permutations" internalName="permutations_block" name="permutations_block">
                <FieldSet version="0" sizeofValue="88" isLatest="true">
                  <String CStyleName="name" pascalStyleName="Name" name="name" />
                  <LongFlags CStyleName="flags" pascalStyleName="Flags" name="flags">
                    <Options regolithID="enum:flags" CStyleName="flags" pascalStyleName="Flags">
                      <Bit name="cannot be chosen randomly" CStyleName="cannot_be_chosen_randomly_bit" pascalStyleName="CannotBeChosenRandomlyBit" />
                    </Options>
                  </LongFlags>
                  <ShortInteger CStyleName="permutation_number" pascalStyleName="PermutationNumber" name="permutation number" cacheOnly="true" unsigned="true" />
                  <Pad name="pad" length="2" />
                  <Pad name="pad" length="24" />
                  <ShortInteger CStyleName="super_low" pascalStyleName="SuperLow" name="super low" />
                  <ShortInteger CStyleName="low" pascalStyleName="Low" name="low" />
                  <ShortInteger CStyleName="medium" pascalStyleName="Medium" name="medium" />
                  <ShortInteger CStyleName="high" pascalStyleName="High" name="high" />
                  <ShortInteger CStyleName="super_high" pascalStyleName="SuperHigh" name="super high" />
                  <Pad name="pad" length="2" />
                  <Block CStyleName="markers" pascalStyleName="Markers" name="markers" maxElementCount="32767">
                    <Layout regolithID="block:markers" internalName="markers_block" name="markers_block">
                      <FieldSet version="0" sizeofValue="80" isLatest="true">
                        <String CStyleName="name" pascalStyleName="Name" name="name" />
                        <ShortInteger CStyleName="node_index" pascalStyleName="NodeIndex" name="node index" />
                        <Pad name="pad" length="2" />
                        <RealQuaternion CStyleName="rotation" pascalStyleName="Rotation" name="rotation" />
                        <RealVector3D CStyleName="translation" pascalStyleName="Translation" name="translation" />
                        <Pad name="pad" length="16" />
                      </FieldSet>
                    </Layout>
                  </Block>
                </FieldSet>
              </Layout>
            </Block>
          </FieldSet>
        </Layout>
      </Block>
      <Block CStyleName="geometries" pascalStyleName="Geometries" name="geometries" maxElementCount="32767">
        <Layout regolithID="block:geometries" internalName="geometries_block" name="geometries_block">
          <FieldSet version="0" sizeofValue="48" isLatest="true">
            <LongFlags CStyleName="flags" pascalStyleName="Flags" name="flags">
              <Options regolithID="enum:flags" CStyleName="flags" pascalStyleName="Flags">
                <Bit name="unused" CStyleName="unused_bit" pascalStyleName="UnusedBit" />
              </Options>
            </LongFlags>
            <Pad name="pad" length="32" />
            <Block CStyleName="parts" pascalStyleName="Parts" name="parts" maxElementCount="32767">
              <Layout regolithID="block:parts" internalName="parts_block" name="parts_block">
                <FieldSet version="0" sizeofValue="104" isLatest="true">
                  <LongFlags CStyleName="flags" pascalStyleName="Flags" name="flags">
                    <Options regolithID="enum:flags" CStyleName="flags" pascalStyleName="Flags">
                      <Bit name="stripped internal" CStyleName="stripped_internal_bit" pascalStyleName="StrippedInternalBit" />
                      <Bit name="zoner" CStyleName="zoner_bit" pascalStyleName="ZonerBit" />
                    </Options>
                  </LongFlags>
                  <ShortInteger CStyleName="shader_index" pascalStyleName="ShaderIndex" name="shader index" />
                  <CharInteger CStyleName="prev_filthy_part_index" pascalStyleName="PrevFilthyPartIndex" name="prev filthy part index" unsigned="true" description="Defaults to 255, but its a hack how this is done" />
                  <CharInteger CStyleName="next_filthy_part_index" pascalStyleName="NextFilthyPartIndex" name="next filthy part index" unsigned="true" description="Defaults to 255, but its a hack how this is done" />
                  <ShortInteger CStyleName="centroid_primary_node" pascalStyleName="CentroidPrimaryNode" name="centroid primary node" cacheOnly="true" />
                  <ShortInteger CStyleName="centroid_secondary_node" pascalStyleName="CentroidSecondaryNode" name="centroid secondary node" cacheOnly="true" />
                  <Real CStyleName="centroid_primary_weight" pascalStyleName="CentroidPrimaryWeight" name="centroid primary weight" cacheOnly="true" />
                  <Real CStyleName="centroid_secondary_weight" pascalStyleName="CentroidSecondaryWeight" name="centroid secondary weight" cacheOnly="true" />
                  <RealVector3D CStyleName="centroid" pascalStyleName="Centroid" name="centroid" />
                  <Block CStyleName="uncompressed_vertices" pascalStyleName="UncompressedVertices" name="uncompressed vertices" maxElementCount="65535">
                    <Layout regolithID="block:uncompressed vertices" internalName="uncompressed vertices_block" name="uncompressed vertices_block">
                      <FieldSet version="0" sizeofValue="68" isLatest="true">
                        <RealVector3D CStyleName="position" pascalStyleName="Position" name="position" />
                        <RealVector3D CStyleName="normal" pascalStyleName="Normal" name="normal" />
                        <RealVector3D CStyleName="binormal" pascalStyleName="Binormal" name="binormal" />
                        <RealVector3D CStyleName="tangent" pascalStyleName="Tangent" name="tangent" />
                        <RealPoint2D CStyleName="texture_coords" pascalStyleName="TextureCoords" name="texture coords" />
                        <ShortInteger CStyleName="node0_index" pascalStyleName="Node0Index" name="node0 index" />
                        <ShortInteger CStyleName="node1_index" pascalStyleName="Node1Index" name="node1 index" />
                        <Real CStyleName="node0_weight" pascalStyleName="Node0Weight" name="node0 weight" />
                        <Real CStyleName="node1_weight" pascalStyleName="Node1Weight" name="node1 weight" />
                      </FieldSet>
                    </Layout>
                  </Block>
                  <Block CStyleName="compressed_vertices" pascalStyleName="CompressedVertices" name="compressed vertices" maxElementCount="65535">
                    <Layout regolithID="block:compressed vertices" internalName="compressed vertices_block" name="compressed vertices_block">
                      <FieldSet version="0" sizeofValue="32" isLatest="true">
                        <RealVector3D CStyleName="position" pascalStyleName="Position" name="position" />
                        <LongInteger CStyleName="normal" pascalStyleName="Normal" name="normal" />
                        <LongInteger CStyleName="binormal" pascalStyleName="Binormal" name="binormal" />
                        <LongInteger CStyleName="tangent" pascalStyleName="Tangent" name="tangent" />
                        <ShortInteger CStyleName="texture_coordinate_u" pascalStyleName="TextureCoordinateU" name="texture coordinate u" />
                        <ShortInteger CStyleName="texture_coordinate_v" pascalStyleName="TextureCoordinateV" name="texture coordinate v" />
                        <CharInteger CStyleName="node0_index" pascalStyleName="Node0Index" name="node0 index" unsigned="true" />
                        <CharInteger CStyleName="node1_index" pascalStyleName="Node1Index" name="node1 index" unsigned="true" />
                        <ShortInteger CStyleName="node0_weight" pascalStyleName="Node0Weight" name="node0 weight" />
                      </FieldSet>
                    </Layout>
                  </Block>
                  <Block CStyleName="triangle_data" pascalStyleName="TriangleData" name="triangle data" maxElementCount="65535">
                    <Layout regolithID="block:triangle data" internalName="triangle data_block" name="triangle data_block">
                      <FieldSet version="0" sizeofValue="6" isLatest="true">
                        <ShortInteger CStyleName="indices" pascalStyleName="Indices" name="indices" />
                        <ShortInteger CStyleName="indices" pascalStyleName="Indices" name="indices" />
                        <ShortInteger CStyleName="indices" pascalStyleName="Indices" name="indices" />
                      </FieldSet>
                    </Layout>
                  </Block>
                  <ShortEnum CStyleName="triangle_buffer_type" pascalStyleName="TriangleBufferType" name="triangle buffer type" cacheOnly="true">
                    <Options regolithID="enum:triangle_buffer_type" CStyleName="triangle_buffer_type" pascalStyleName="TriangleBufferType">
                      <Enum name="triangle list" CStyleName="triangle_list" pascalStyleName="TriangleList" />
                      <Enum name="triangle strip" CStyleName="triangle_strip" pascalStyleName="TriangleStrip" />
                    </Options>
                  </ShortEnum>
                  <Pad name="pad" length="2" />
                  <LongInteger CStyleName="triangle_count" pascalStyleName="TriangleCount" name="triangle count" cacheOnly="true" unsigned="true" description="for triangle strips, the number of indices stored in the cache file = this + 2" />
                  <LongInteger CStyleName="triangle_pointer" pascalStyleName="TrianglePointer" name="triangle pointer" cacheOnly="true" description="On Xbox: pointer to the triangle indices. On PC: offset to triangles relative to the end of the maps vertex data, but on map load, this is set to another pointer which is never read." />
                  <LongInteger CStyleName="triangle_pointer_2" pascalStyleName="TrianglePointer2" name="triangle pointer 2" cacheOnly="true" description="On Xbox: pointer to the entry in the second parts list which points to the triangle indices. On PC: same value as the first triangle offset, and it is overwritten by a pointer on map load that is read when rendering." />
                  <Struct CStyleName="vertices" pascalStyleName="Vertices" name="vertices" cacheOnly="true">
                    <Layout regolithID="structure:model_vertex_reference" internalName="model_vertex_reference_struct" backingBlockInternalName="model_vertex_reference_struct_block" name="model vertex reference">
                      <FieldSet version="0" sizeofValue="20" isLatest="true">
                        <ShortEnum CStyleName="vertex_type" pascalStyleName="VertexType" name="vertex type" cacheOnly="true" description="set this or die">
                          <Options regolithID="enum:vertex_type" CStyleName="vertex_type" pascalStyleName="VertexType">
                            <Enum name="environment uncompressed" CStyleName="environment_uncompressed" pascalStyleName="EnvironmentUncompressed" />
                            <Enum name="environment compressed" CStyleName="environment_compressed" pascalStyleName="EnvironmentCompressed" />
                            <Enum name="environment lightmap uncompressed" CStyleName="environment_lightmap_uncompressed" pascalStyleName="EnvironmentLightmapUncompressed" />
                            <Enum name="environment lightmap compressed" CStyleName="environment_lightmap_compressed" pascalStyleName="EnvironmentLightmapCompressed" />
                            <Enum name="model uncompressed" CStyleName="model_uncompressed" pascalStyleName="ModelUncompressed" />
                            <Enum name="model compressed" CStyleName="model_compressed" pascalStyleName="ModelCompressed" />
                            <Enum name="dynamic unlit" CStyleName="dynamic_unlit" pascalStyleName="DynamicUnlit" />
                            <Enum name="dynamic lit" CStyleName="dynamic_lit" pascalStyleName="DynamicLit" />
                            <Enum name="dynamic screen" CStyleName="dynamic_screen" pascalStyleName="DynamicScreen" />
                            <Enum name="debug" CStyleName="debug" pascalStyleName="Debug" />
                            <Enum name="decal" CStyleName="decal" pascalStyleName="Decal" />
                            <Enum name="detail object" CStyleName="detail_object" pascalStyleName="DetailObject" />
                            <Enum name="environment uncompressed ff" CStyleName="environment_uncompressed_ff" pascalStyleName="EnvironmentUncompressedFf" />
                            <Enum name="environment lightmap uncompressed ff" CStyleName="environment_lightmap_uncompressed_ff" pascalStyleName="EnvironmentLightmapUncompressedFf" />
                            <Enum name="model uncompressed ff" CStyleName="model_uncompressed_ff" pascalStyleName="ModelUncompressedFf" />
                            <Enum name="model processed" CStyleName="model_processed" pascalStyleName="ModelProcessed" />
                            <Enum name="unlit zsprite" CStyleName="unlit_zsprite" pascalStyleName="UnlitZsprite" />
                            <Enum name="widget" CStyleName="widget" pascalStyleName="Widget" />
                          </Options>
                        </ShortEnum>
                        <Pad name="pad" length="2" />
                        <LongInteger CStyleName="vertex_count" pascalStyleName="VertexCount" name="vertex count" unsigned="true" />
                        <LongInteger CStyleName="offset" pascalStyleName="Offset" name="offset" cacheOnly="true" unsigned="true" />
                        <LongInteger CStyleName="unknown_pointer" pascalStyleName="UnknownPointer" name="unknown pointer" cacheOnly="true" />
                        <LongInteger CStyleName="vertex_pointer" pascalStyleName="VertexPointer" name="vertex pointer" cacheOnly="true" />
                      </FieldSet>
                    </Layout>
                  </Struct>
                </FieldSet>
              </Layout>
            </Block>
          </FieldSet>
        </Layout>
      </Block>
      <Block CStyleName="shaders" pascalStyleName="Shaders" name="shaders" maxElementCount="32767">
        <Layout regolithID="block:shaders" internalName="shaders_block" name="shaders_block">
          <FieldSet version="0" sizeofValue="32" isLatest="true">
            <TagReference CStyleName="shader" pascalStyleName="Shader" name="shader">
              <tag>shader</tag>
            </TagReference>
            <ShortInteger CStyleName="permutation" pascalStyleName="Permutation" name="permutation" />
            <Pad name="pad" length="2" />
            <Pad name="pad" length="12" />
          </FieldSet>
        </Layout>
      </Block>
    </FieldSet>
  </Layout>
</TagGroup>